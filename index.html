<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏°‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏¢‡πå</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&display=swap');
        body { font-family: 'Kanit', sans-serif; }
        .flag-emoji {
            font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Android Emoji", "EmojiSymbols", sans-serif;
            font-size: 8rem;
            line-height: 1;
        }
        .flag-animation {
            animation: wave 2s ease-in-out infinite;
        }
        @keyframes wave {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }
        .correct-answer {
            animation: bounce 0.6s ease-in-out;
        }
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-4 drop-shadow-lg">
                üåè ‡πÄ‡∏Å‡∏°‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏¢‡πå üéâ
            </h1>
            <p class="text-xl text-white/90 mb-6">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô!</p>
            
            <!-- Navigation Buttons -->
            <div class="flex justify-center space-x-4 mb-6">
                <button id="gameTabBtn" class="bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white font-semibold py-3 px-3 rounded-xl transition-all duration-200 border-2 border-white/50 text-2xl" title="‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°">
                    üéÆ
                </button>
                <button id="leaderboardTabBtn" class="bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white font-semibold py-3 px-3 rounded-xl transition-all duration-200 border-2 border-white/30 text-2xl" title="‡∏î‡∏π‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô">
                    üèÜ
                </button>
            </div>

            <div id="gameStats" class="bg-white/20 backdrop-blur-sm rounded-xl p-4 inline-block">
                <div class="flex items-center justify-center space-x-4 text-white">
                    <div class="text-center">
                        <div class="text-2xl font-bold" id="score">0</div>
                        <div class="text-sm">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                    </div>
                    <div class="w-px h-8 bg-white/30"></div>
                    <div class="text-center">
                        <div class="text-2xl font-bold" id="questionNumber">1</div>
                        <div class="text-sm">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà</div>
                    </div>
                    <div class="w-px h-8 bg-white/30"></div>
                    <div class="text-center">
                        <div class="text-2xl font-bold">10</div>
                        <div class="text-sm">‡∏Ç‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    </div>
                    <div class="w-px h-8 bg-white/30"></div>
                    <div class="text-center">
                        <div class="text-2xl font-bold" id="timer">00:00</div>
                        <div class="text-sm">‡πÄ‡∏ß‡∏•‡∏≤</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Container -->
        <div class="max-w-4xl mx-auto">
            <!-- Leaderboard Card -->
            <div id="leaderboardCard" class="bg-white rounded-2xl shadow-2xl p-8 mb-6 hidden">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</h2>
                    <p class="text-gray-600">10 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</p>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="bg-gradient-to-r from-blue-500 to-purple-500 text-white">
                                <th class="py-3 px-4 rounded-tl-xl text-center">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th>
                                <th class="py-3 px-4 text-left">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</th>
                                <th class="py-3 px-4 text-center">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th>
                                <th class="py-3 px-4 text-center">‡πÄ‡∏ß‡∏•‡∏≤</th>
                                <th class="py-3 px-4 rounded-tr-xl text-center">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <!-- Leaderboard entries will be inserted here -->
                        </tbody>
                    </table>
                </div>
                
                <div class="text-center mt-6">
                    <button id="clearLeaderboardBtn" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-3 rounded-xl transition-all duration-200 text-2xl" title="‡∏•‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô">
                        üóëÔ∏è
                    </button>
                </div>
            </div>

            <!-- Question Card -->
            <div id="gameCard" class="bg-white rounded-2xl shadow-2xl p-8 mb-6">
                <div class="text-center mb-8">
                    <div id="flagContainer" class="mb-6">
                        <div id="flagDisplay" class="flag-animation inline-block w-48 h-32 mx-auto"></div>
                    </div>
                    <h2 id="questionText" class="text-2xl md:text-3xl font-semibold text-gray-800 mb-6"></h2>
                </div>

                <!-- Answer Options -->
                <div id="answersContainer" class="grid grid-cols-2 gap-4 mb-6">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Next Button -->
                <div class="text-center">
                    <button id="nextButton" class="bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-semibold py-3 px-3 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-2xl" title="‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ" disabled>
                        ‚Üí
                    </button>
                </div>
            </div>

            <!-- Results Card (Hidden initially) -->
            <div id="resultsCard" class="bg-white rounded-2xl shadow-2xl p-8 text-center hidden">
                <div class="mb-6">
                    <div class="text-6xl mb-4">üèÜ</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß!</h2>
                    <div class="text-5xl font-bold text-blue-600 mb-2" id="finalScore">0</div>
                    <div class="text-xl text-gray-600 mb-2">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
                    <div class="text-lg text-gray-500 mb-4">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: <span id="finalTime">00:00</span></div>
                    <div id="resultMessage" class="text-lg text-gray-700 mb-6"></div>
                    
                    <!-- Name Input for Leaderboard -->
                    <div id="nameInputSection" class="mb-6">
                        <p class="text-gray-600 mb-3">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö:</p>
                        <div class="flex justify-center items-center space-x-3">
                            <input type="text" id="playerNameInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" maxlength="20" class="border-2 border-gray-300 rounded-lg px-4 py-2 text-center focus:border-blue-500 focus:outline-none">
                            <button id="saveScoreBtn" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-3 rounded-lg transition-all duration-200 text-xl" title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô">
                                üíæ
                            </button>
                        </div>
                    </div>
                </div>
                <div class="space-x-4">
                    <button id="playAgainButton" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-3 px-3 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105 text-2xl" title="‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á">
                        üéÆ
                    </button>
                    <button id="viewLeaderboardBtn" class="bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white font-semibold py-3 px-3 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105 text-2xl" title="‡∏î‡∏π‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô">
                        üèÜ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white/10 backdrop-blur-sm border-t border-white/20 mt-12">
        <div class="container mx-auto px-4 py-6">
            <div class="text-center">
                <p class="text-white/90 text-lg font-medium mb-2">
                    üéÆ ‡πÄ‡∏Å‡∏°‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏¢‡πå
                </p>
                <p class="text-white/70 text-sm">
                    ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ <span class="font-semibold text-white">Kritch Thatsanasorn</span>
                </p>
                <div class="flex justify-center items-center mt-3 space-x-2">
                    <div class="w-2 h-2 bg-white/50 rounded-full"></div>
                    <p class="text-white/60 text-xs">
                        ¬© 2025 ‚Ä¢ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô
                    </p>
                    <div class="w-2 h-2 bg-white/50 rounded-full"></div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const flagSVGs = {
            "TH": `<svg width="200" height="133" viewBox="0 0 200 133" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="133" fill="#ED1C24"/>
                <rect y="22" width="200" height="22" fill="#FFFFFF"/>
                <rect y="44" width="200" height="44" fill="#241D4F"/>
                <rect y="88" width="200" height="22" fill="#FFFFFF"/>
            </svg>`,
            "SG": `<svg width="200" height="133" viewBox="0 0 200 133" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="66.5" fill="#ED2939"/>
                <rect y="66.5" width="200" height="66.5" fill="#FFFFFF"/>
                <circle cx="50" cy="33" r="15" fill="#FFFFFF"/>
                <circle cx="55" cy="33" r="12" fill="#ED2939"/>
                <g fill="#FFFFFF" transform="translate(70,20)">
                    <polygon points="0,0 3,9 12,9 5,14 8,23 0,18 -8,23 -5,14 -12,9 -3,9"/>
                    <polygon points="20,5 23,14 32,14 25,19 28,28 20,23 12,28 15,19 8,14 17,14"/>
                    <polygon points="10,25 13,34 22,34 15,39 18,48 10,43 2,48 5,39 -2,34 7,34"/>
                    <polygon points="30,30 33,39 42,39 35,44 38,53 30,48 22,53 25,44 18,39 27,39"/>
                    <polygon points="40,10 43,19 52,19 45,24 48,33 40,28 32,33 35,24 28,19 37,19"/>
                </g>
            </svg>`,
            "MY": `<svg width="200" height="100" viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg">
                <g>
                    <rect width="200" height="100" fill="#CC0001"/>
                    <rect y="0" width="200" height="7.14" fill="#CC0001"/>
                    <rect y="14.28" width="200" height="7.14" fill="#FFFFFF"/>
                    <rect y="28.56" width="200" height="7.14" fill="#CC0001"/>
                    <rect y="42.84" width="200" height="7.14" fill="#FFFFFF"/>
                    <rect y="57.12" width="200" height="7.14" fill="#CC0001"/>
                    <rect y="71.4" width="200" height="7.14" fill="#FFFFFF"/>
                    <rect y="85.68" width="200" height="7.14" fill="#CC0001"/>
                    <rect x="0" y="0" width="100" height="50" fill="#010066"/>
                    <circle cx="25" cy="18" r="8" fill="#FFCC00"/>
                    <circle cx="29" cy="18" r="6" fill="#010066"/>
                    <polygon points="45,10 47,16 53,16 48,20 50,26 45,22 40,26 42,20 37,16 43,16" fill="#FFCC00"/>
                </g>
            </svg>`,
            "ID": `<svg width="200" height="133" viewBox="0 0 200 133" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="66.5" fill="#FF0000"/>
                <rect y="66.5" width="200" height="66.5" fill="#FFFFFF"/>
            </svg>`,
            "PH": `<svg width="200" height="100" viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="50" fill="#0038A8"/>
                <rect y="50" width="200" height="50" fill="#CE1126"/>
                <polygon points="0,0 100,50 0,100" fill="#FFFFFF"/>
                <circle cx="33" cy="25" r="8" fill="#FFCD00"/>
                <polygon points="33,17 35,23 41,23 36,27 38,33 33,29 28,33 30,27 25,23 31,23" fill="#0038A8"/>
                <polygon points="15,15 17,21 23,21 18,25 20,31 15,27 10,31 12,25 7,21 13,21" fill="#FFCD00"/>
                <polygon points="51,15 53,21 59,21 54,25 56,31 51,27 46,31 48,25 43,21 49,21" fill="#FFCD00"/>
                <polygon points="15,75 17,81 23,81 18,85 20,91 15,87 10,91 12,85 7,81 13,81" fill="#FFCD00"/>
            </svg>`,
            "VN": `<svg width="200" height="133" viewBox="0 0 200 133" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="133" fill="#DA020E"/>
                <polygon points="100,33 108,58 133,58 113,73 121,98 100,83 79,98 87,73 67,58 92,58" fill="#FFFF00"/>
            </svg>`,
            "LA": `<svg width="200" height="133" viewBox="0 0 200 133" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="133" fill="#CE1126"/>
                <rect y="44" width="200" height="44" fill="#002868"/>
                <circle cx="100" cy="66.5" r="20" fill="#FFFFFF"/>
            </svg>`,
            "KH": `<svg width="200" height="133" viewBox="0 0 200 133" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="44" fill="#032EA1"/>
                <rect y="44" width="200" height="44" fill="#E4002B"/>
                <rect y="88" width="200" height="44" fill="#032EA1"/>
                <g transform="translate(100,66.5)" fill="#FFFFFF">
                    <rect x="-30" y="-15" width="60" height="30" fill="#FFFFFF"/>
                    <rect x="-25" y="-10" width="10" height="20" fill="#032EA1"/>
                    <rect x="-5" y="-10" width="10" height="20" fill="#032EA1"/>
                    <rect x="15" y="-10" width="10" height="20" fill="#032EA1"/>
                </g>
            </svg>`,
            "MM": `<svg width="200" height="133" viewBox="0 0 200 133" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="44" fill="#FFCD00"/>
                <rect y="44" width="200" height="44" fill="#34B233"/>
                <rect y="88" width="200" height="44" fill="#EA2839"/>
                <polygon points="100,33 108,58 133,58 113,73 121,98 100,83 79,98 87,73 67,58 92,58" fill="#FFFFFF"/>
            </svg>`,
            "BN": `<svg width="200" height="100" viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg">
                <rect width="200" height="100" fill="#FFFF00"/>
                <rect y="25" width="200" height="50" fill="#000000"/>
                <rect y="37.5" width="200" height="25" fill="#FFFFFF"/>
                <g transform="translate(100,50)" fill="#FF0000">
                    <circle r="15" fill="none" stroke="#FF0000" stroke-width="2"/>
                    <rect x="-20" y="-5" width="40" height="10"/>
                </g>
            </svg>`
        };

        const questions = [
            {
                flag: "TH",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡πÑ‡∏ó‡∏¢", "‡∏°‡∏≤‡πÄ‡∏•‡πÄ‡∏ã‡∏µ‡∏¢", "‡∏≠‡∏¥‡∏ô‡πÇ‡∏î‡∏ô‡∏µ‡πÄ‡∏ã‡∏µ‡∏¢", "‡∏ü‡∏¥‡∏•‡∏¥‡∏õ‡∏õ‡∏¥‡∏ô‡∏™‡πå"],
                correct: 0
            },
            {
                flag: "SG",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡∏°‡∏≤‡πÄ‡∏•‡πÄ‡∏ã‡∏µ‡∏¢", "‡∏™‡∏¥‡∏á‡∏Ñ‡πÇ‡∏õ‡∏£‡πå", "‡∏≠‡∏¥‡∏ô‡πÇ‡∏î‡∏ô‡∏µ‡πÄ‡∏ã‡∏µ‡∏¢", "‡∏ö‡∏£‡∏π‡πÑ‡∏ô"],
                correct: 1
            },
            {
                flag: "MY",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡πÑ‡∏ó‡∏¢", "‡∏°‡∏≤‡πÄ‡∏•‡πÄ‡∏ã‡∏µ‡∏¢", "‡∏ü‡∏¥‡∏•‡∏¥‡∏õ‡∏õ‡∏¥‡∏ô‡∏™‡πå", "‡πÄ‡∏ß‡∏µ‡∏¢‡∏î‡∏ô‡∏≤‡∏°"],
                correct: 1
            },
            {
                flag: "ID",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡∏≠‡∏¥‡∏ô‡πÇ‡∏î‡∏ô‡∏µ‡πÄ‡∏ã‡∏µ‡∏¢", "‡∏™‡∏¥‡∏á‡∏Ñ‡πÇ‡∏õ‡∏£‡πå", "‡πÑ‡∏ó‡∏¢", "‡∏°‡∏≤‡πÄ‡∏•‡πÄ‡∏ã‡∏µ‡∏¢"],
                correct: 0
            },
            {
                flag: "PH",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡πÄ‡∏ß‡∏µ‡∏¢‡∏î‡∏ô‡∏≤‡∏°", "‡∏•‡∏≤‡∏ß", "‡∏ü‡∏¥‡∏•‡∏¥‡∏õ‡∏õ‡∏¥‡∏ô‡∏™‡πå", "‡∏Å‡∏±‡∏°‡∏û‡∏π‡∏ä‡∏≤"],
                correct: 2
            },
            {
                flag: "VN",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡∏à‡∏µ‡∏ô", "‡πÄ‡∏ß‡∏µ‡∏¢‡∏î‡∏ô‡∏≤‡∏°", "‡∏•‡∏≤‡∏ß", "‡πÄ‡∏°‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏£‡πå"],
                correct: 1
            },
            {
                flag: "LA",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡πÑ‡∏ó‡∏¢", "‡πÄ‡∏ß‡∏µ‡∏¢‡∏î‡∏ô‡∏≤‡∏°", "‡∏•‡∏≤‡∏ß", "‡∏Å‡∏±‡∏°‡∏û‡∏π‡∏ä‡∏≤"],
                correct: 2
            },
            {
                flag: "KH",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡∏Å‡∏±‡∏°‡∏û‡∏π‡∏ä‡∏≤", "‡∏•‡∏≤‡∏ß", "‡πÄ‡∏°‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏£‡πå", "‡πÑ‡∏ó‡∏¢"],
                correct: 0
            },
            {
                flag: "MM",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡∏ö‡∏±‡∏á‡∏Å‡∏•‡∏≤‡πÄ‡∏ó‡∏®", "‡πÄ‡∏°‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏£‡πå", "‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡∏µ‡∏¢", "‡∏•‡∏≤‡∏ß"],
                correct: 1
            },
            {
                flag: "BN",
                question: "‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏î?",
                options: ["‡∏°‡∏≤‡πÄ‡∏•‡πÄ‡∏ã‡∏µ‡∏¢", "‡∏™‡∏¥‡∏á‡∏Ñ‡πÇ‡∏õ‡∏£‡πå", "‡∏ö‡∏£‡∏π‡πÑ‡∏ô", "‡∏≠‡∏¥‡∏ô‡πÇ‡∏î‡∏ô‡∏µ‡πÄ‡∏ã‡∏µ‡∏¢"],
                correct: 2
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let selectedAnswer = null;
        let startTime = null;
        let gameTimer = null;
        let currentView = 'game'; // 'game' or 'leaderboard'
        let shuffledQuestions = [];
        let currentQuestionData = null;

        // Timer functions
        function startTimer() {
            startTime = Date.now();
            gameTimer = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            if (startTime) {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        function stopTimer() {
            if (gameTimer) {
                clearInterval(gameTimer);
                gameTimer = null;
            }
        }

        function getElapsedTime() {
            if (startTime) {
                return Math.floor((Date.now() - startTime) / 1000);
            }
            return 0;
        }

        // Leaderboard functions
        function saveScore(playerName, score, timeInSeconds) {
            let leaderboard = JSON.parse(localStorage.getItem('aseanGameLeaderboard') || '[]');
            
            const newEntry = {
                name: playerName,
                score: score,
                time: timeInSeconds,
                date: new Date().toLocaleDateString('th-TH')
            };
            
            leaderboard.push(newEntry);
            
            // Sort by score (descending), then by time (ascending)
            leaderboard.sort((a, b) => {
                if (b.score !== a.score) {
                    return b.score - a.score;
                }
                return a.time - b.time;
            });
            
            // Keep only top 10
            leaderboard = leaderboard.slice(0, 10);
            
            localStorage.setItem('aseanGameLeaderboard', JSON.stringify(leaderboard));
            displayLeaderboard();
        }

        function displayLeaderboard() {
            const leaderboard = JSON.parse(localStorage.getItem('aseanGameLeaderboard') || '[]');
            const tbody = document.getElementById('leaderboardBody');
            tbody.innerHTML = '';

            if (leaderboard.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" class="text-center py-8 text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</td></tr>';
                return;
            }

            leaderboard.forEach((entry, index) => {
                const row = document.createElement('tr');
                row.className = index % 2 === 0 ? 'bg-gray-50' : 'bg-white';
                
                const rankEmoji = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}`;
                const minutes = Math.floor(entry.time / 60);
                const seconds = entry.time % 60;
                const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                row.innerHTML = `
                    <td class="py-3 px-4 text-center font-bold">${rankEmoji}</td>
                    <td class="py-3 px-4 font-medium">${entry.name}</td>
                    <td class="py-3 px-4 text-center font-bold text-blue-600">${entry.score}</td>
                    <td class="py-3 px-4 text-center text-gray-600">${timeString}</td>
                    <td class="py-3 px-4 text-center text-gray-500 text-sm">${entry.date}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function clearLeaderboard() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) {
                localStorage.removeItem('aseanGameLeaderboard');
                displayLeaderboard();
            }
        }

        // Shuffle functions
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function prepareQuestions() {
            // Shuffle questions
            shuffledQuestions = shuffleArray(questions);
            
            // For each question, shuffle the options and track correct answer
            shuffledQuestions = shuffledQuestions.map(question => {
                const correctAnswer = question.options[question.correct];
                const shuffledOptions = shuffleArray(question.options);
                const newCorrectIndex = shuffledOptions.indexOf(correctAnswer);
                
                return {
                    ...question,
                    options: shuffledOptions,
                    correct: newCorrectIndex
                };
            });
        }

        // View management
        function showGameView() {
            currentView = 'game';
            document.getElementById('gameCard').classList.remove('hidden');
            document.getElementById('resultsCard').classList.add('hidden');
            document.getElementById('leaderboardCard').classList.add('hidden');
            document.getElementById('gameStats').classList.remove('hidden');
            
            // Update tab buttons
            document.getElementById('gameTabBtn').className = 'bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white font-semibold py-3 px-3 rounded-xl transition-all duration-200 border-2 border-white/50 text-2xl';
            document.getElementById('leaderboardTabBtn').className = 'bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white font-semibold py-3 px-3 rounded-xl transition-all duration-200 border-2 border-white/30 text-2xl';
        }

        function showLeaderboardView() {
            currentView = 'leaderboard';
            document.getElementById('gameCard').classList.add('hidden');
            document.getElementById('resultsCard').classList.add('hidden');
            document.getElementById('leaderboardCard').classList.remove('hidden');
            document.getElementById('gameStats').classList.add('hidden');
            
            // Update tab buttons
            document.getElementById('gameTabBtn').className = 'bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white font-semibold py-3 px-3 rounded-xl transition-all duration-200 border-2 border-white/30 text-2xl';
            document.getElementById('leaderboardTabBtn').className = 'bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white font-semibold py-3 px-3 rounded-xl transition-all duration-200 border-2 border-white/50 text-2xl';
            
            displayLeaderboard();
        }

        function displayQuestion() {
            currentQuestionData = shuffledQuestions[currentQuestion];
            document.getElementById('flagDisplay').innerHTML = flagSVGs[currentQuestionData.flag];
            document.getElementById('questionText').textContent = currentQuestionData.question;
            document.getElementById('questionNumber').textContent = currentQuestion + 1;

            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';

            currentQuestionData.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'bg-gray-100 hover:bg-blue-100 border-2 border-gray-200 hover:border-blue-300 text-gray-800 font-medium py-4 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 text-lg';
                button.textContent = option;
                button.onclick = () => selectAnswer(index, button);
                answersContainer.appendChild(button);
            });

            document.getElementById('nextButton').disabled = true;
            selectedAnswer = null;
            
            // Start timer on first question
            if (currentQuestion === 0 && !startTime) {
                startTimer();
            }
        }

        function selectAnswer(answerIndex, buttonElement) {
            // Remove previous selections
            document.querySelectorAll('#answersContainer button').forEach(btn => {
                btn.className = 'bg-gray-100 hover:bg-blue-100 border-2 border-gray-200 hover:border-blue-300 text-gray-800 font-medium py-4 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 text-lg';
            });

            selectedAnswer = answerIndex;

            if (answerIndex === currentQuestionData.correct) {
                buttonElement.className = 'bg-green-500 border-2 border-green-600 text-white font-medium py-4 px-6 rounded-xl text-lg correct-answer';
                score += 10;
                document.getElementById('score').textContent = score;
            } else {
                buttonElement.className = 'bg-red-500 border-2 border-red-600 text-white font-medium py-4 px-6 rounded-xl text-lg';
                // Show correct answer
                document.querySelectorAll('#answersContainer button')[currentQuestionData.correct].className = 'bg-green-500 border-2 border-green-600 text-white font-medium py-4 px-6 rounded-xl text-lg correct-answer';
            }

            // Disable all buttons
            document.querySelectorAll('#answersContainer button').forEach(btn => {
                btn.disabled = true;
                btn.style.pointerEvents = 'none';
            });

            document.getElementById('nextButton').disabled = false;
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < shuffledQuestions.length) {
                displayQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            stopTimer();
            const elapsedTime = getElapsedTime();
            const minutes = Math.floor(elapsedTime / 60);
            const seconds = elapsedTime % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('gameCard').classList.add('hidden');
            document.getElementById('resultsCard').classList.remove('hidden');
            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalTime').textContent = timeString;

            let message = '';
            if (score >= 80) {
                message = 'üåü ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÜ!';
            } else if (score >= 60) {
                message = 'üëç ‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏î‡∏µ';
            } else if (score >= 40) {
                message = 'üòä ‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏ß! ‡∏•‡∏≠‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏î‡∏π‡∏ô‡∏∞';
            } else {
                message = 'üí™ ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£! ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ';
            }
            document.getElementById('resultMessage').textContent = message;
        }

        function resetGame() {
            currentQuestion = 0;
            score = 0;
            selectedAnswer = null;
            startTime = null;
            stopTimer();
            
            document.getElementById('score').textContent = '0';
            document.getElementById('timer').textContent = '00:00';
            document.getElementById('playerNameInput').value = '';
            
            // Prepare new shuffled questions
            prepareQuestions();
            
            showGameView();
            displayQuestion();
        }

        // Event listeners
        document.getElementById('nextButton').addEventListener('click', nextQuestion);
        document.getElementById('playAgainButton').addEventListener('click', resetGame);
        document.getElementById('gameTabBtn').addEventListener('click', function() {
            resetGame();
        });
        document.getElementById('leaderboardTabBtn').addEventListener('click', showLeaderboardView);
        document.getElementById('clearLeaderboardBtn').addEventListener('click', clearLeaderboard);
        document.getElementById('viewLeaderboardBtn').addEventListener('click', showLeaderboardView);
        
        document.getElementById('saveScoreBtn').addEventListener('click', function() {
            const playerName = document.getElementById('playerNameInput').value.trim();
            if (playerName) {
                saveScore(playerName, score, getElapsedTime());
                document.getElementById('nameInputSection').innerHTML = '<p class="text-green-600 font-semibold">‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!</p>';
            } else {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì');
            }
        });
        
        // Allow Enter key to save score
        document.getElementById('playerNameInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('saveScoreBtn').click();
            }
        });

        // Initialize game
        prepareQuestions();
        displayQuestion();
    </script>
</body>
</html>
